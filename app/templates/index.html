<!-- app/templates/index.html -->

{% extends "base.html" %}

{% block title %}ByTaiwan{% endblock %}

{% block head %}
	{{ super() }}
	<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">
	<link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">

	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	
	<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css')}}"/>

{% endblock %}

{% block page_content %}
<div class="page-header">
    <h2 class="shadow">Hello, {% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Stranger{% endif %}!</h2>
</div>
<div id="mycarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <!--<ol class="panel-body carousel-indicators">
  <!--  <li data-target="#mycarousel" data-slide-to="0" class="active"></li>-->
  <!--  <li data-target="#mycarousel" data-slide-to="1"></li>-->
  <!--  <li data-target="#mycarousel" data-slide-to="2"></li>-->
  <!--  <li data-target="#mycarousel" data-slide-to="3"></li>-->
  <!--  <li data-target="#mycarousel" data-slide-to="4"></li>-->
  <!--</ol>-->

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    
    {% for story in stories %} 
    <div class="item">
        <img src="{{ url_for('static', filename='story/images/'+ story.imgurl) }}" data-color="lightblue" alt="{{ story.title }}">
        <div class="carousel-caption">
            <h3>"{{ story.title }}"</h3>
        </div>
    </div>
    {% endfor %}
    

  </div>

<div class="row">
	<div class="footer text-center">
	    <p></p>
		<p></p>
		<p>Copyright ByTaiwan 2018. All rights reserved.</p>
		<p>eMail : bytaiwan5812@gmail.com</p>
	</div>
</div>
  <!-- Controls -->
  <a class="left carousel-control" href="#mycarousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#mycarousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>


<script>
var $item = $('.carousel .item'); 
var $wHeight = $(window).height();
$item.eq(0).addClass('active');
$item.height($wHeight); 
$item.addClass('full-screen');

$('.carousel img').each(function() {
  var $src = $(this).attr('src');
  var $color = $(this).attr('data-color');
  $(this).parent().css({
    'background-image' : 'url(' + $src + ')',
    'background-color' : $color
  });
  $(this).remove();
});

$(window).on('resize', function (){
  $wHeight = $(window).height();
  $item.height($wHeight);
});

$('.carousel').carousel({
  interval: 6000,
  pause: "false"
});
</script>

{% endblock %}